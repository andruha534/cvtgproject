{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cv-wrapper\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  id: \"camera-container\"\n};\nconst _hoisted_3 = {\n  id: \"camera\"\n};\nconst _hoisted_4 = {\n  ref: \"video\",\n  width: \"640\",\n  height: \"480\",\n  autoplay: \"\"\n};\nconst _hoisted_5 = {\n  ref: \"canvas\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_6 = {\n  id: \"result\"\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"main-title-section\"\n  }, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"main-title\"\n  }, [_createElementVNode(\"p\", null, \"Computer Vision\")], -1 /* HOISTED */)), _createElementVNode(\"div\", {\n    class: \"try-now-container\"\n  }, [_createElementVNode(\"div\", {\n    class: \"container\"\n  }, [_createElementVNode(\"button\", {\n    class: \"button\",\n    onClick: $setup.showCamera\n  }, \"Try now\")])])]), _createCommentVNode(\" Плавный переход при появлении контейнера камеры \"), _createVNode(_Transition, {\n    name: \"fade\"\n  }, {\n    default: _withCtx(() => [$setup.isCameraActive ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"video\", _hoisted_4, null, 512 /* NEED_PATCH */), _createElementVNode(\"button\", {\n      id: \"capture\",\n      onClick: $setup.captureImage\n    }, \"Capture\"), _createElementVNode(\"canvas\", _hoisted_5, null, 512 /* NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_6, [$setup.prediction ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n      src: 'data:image/jpeg;base64,' + $setup.prediction.image,\n      alt: \"Processed Image\"\n    }, null, 8 /* PROPS */, _hoisted_8), $setup.prediction.emotions && $setup.prediction.emotions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_cache[1] || (_cache[1] = _createElementVNode(\"h3\", null, \"Detected Emotions:\", -1 /* HOISTED */)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.prediction.emotions, (emotion, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, _toDisplayString(emotion.emotion) + \": \" + _toDisplayString(emotion.confidence), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _cache[2] || (_cache[2] = [_createElementVNode(\"p\", null, \"No emotions detected.\", -1 /* HOISTED */)])))])) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","key","id","ref","width","height","autoplay","style","_createElementBlock","_hoisted_1","_createElementVNode","onClick","$setup","showCamera","_createCommentVNode","_createVNode","_Transition","name","default","_withCtx","isCameraActive","_hoisted_2","_hoisted_3","_hoisted_4","captureImage","_hoisted_5","_hoisted_6","prediction","_hoisted_7","src","image","alt","_hoisted_8","emotions","length","_hoisted_9","_Fragment","_renderList","emotion","index","_toDisplayString","confidence","_hoisted_10","_cache","_"],"sources":["/Users/andreysliva/Desktop/tdr_vue/front/src/views/CVView.vue"],"sourcesContent":["<template>\n    <div class=\"cv-wrapper\">\n        <div class=\"main-title-section\">\n            <div class=\"main-title\">\n                <p>Computer Vision</p>\n            </div>\n            <div class=\"try-now-container\">\n                <div class=\"container\">\n                    <button class=\"button\" @click=\"showCamera\">Try now</button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Плавный переход при появлении контейнера камеры -->\n        <transition name=\"fade\">\n            <div v-if=\"isCameraActive\" id=\"camera-container\">\n                <div id=\"camera\">\n                    <video ref=\"video\" width=\"640\" height=\"480\" autoplay></video>\n                    <button id=\"capture\" @click=\"captureImage\">Capture</button>\n                    <canvas ref=\"canvas\" style=\"display: none;\"></canvas>\n                </div>\n                <div id=\"result\">\n                    <div v-if=\"prediction\">\n                        <img :src=\"'data:image/jpeg;base64,' + prediction.image\" alt=\"Processed Image\" />\n                        <div v-if=\"prediction.emotions && prediction.emotions.length > 0\">\n                            <h3>Detected Emotions:</h3>\n                            <ul>\n                                <li v-for=\"(emotion, index) in prediction.emotions\" :key=\"index\">\n                                    {{ emotion.emotion }}: {{ emotion.confidence }}\n                                </li>\n                            </ul>\n                        </div>\n                        <div v-else>\n                            <p>No emotions detected.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </transition>\n    </div>\n</template>\n\n<script setup>\nimport { ref, onUnmounted } from 'vue'\n\n// Реактивная переменная для управления видимостью камеры\nconst isCameraActive = ref(false)\n\n// Ссылки на элементы video и canvas\nconst video = ref(null)\nconst canvas = ref(null)\n\n// Реактивная переменная для хранения результатов предсказания\nconst prediction = ref(null)\n\nlet stream = null\n\n// Функция для отображения камеры\nconst showCamera = () => {\n    isCameraActive.value = true\n    console.log('Camera active:', isCameraActive.value)\n    startCamera()\n}\n\n// Функция для запуска камеры\nconst startCamera = async () => {\n    try {\n        stream = await navigator.mediaDevices.getUserMedia({ video: true })\n        if (video.value) {\n            video.value.srcObject = stream\n        }\n    } catch (err) {\n        console.error('Ошибка доступа к камере:', err)\n    }\n}\n\n// Функция для остановки камеры\nconst stopCamera = () => {\n    if (stream) {\n        stream.getTracks().forEach(track => track.stop())\n    }\n}\n\n// Останавливаем камеру при размонтировании компонента\nonUnmounted(() => {\n    stopCamera()\n})\n\n// Функция для захвата изображения с камеры и отправки на бэкенд\nconst captureImage = async () => {\n    if (canvas.value && video.value) {\n        const context = canvas.value.getContext('2d')\n        canvas.value.width = video.value.videoWidth\n        canvas.value.height = video.value.videoHeight\n        context.drawImage(video.value, 0, 0, canvas.value.width, canvas.value.height)\n        const imageData = canvas.value.toDataURL('image/jpeg')\n        console.log('Captured Image:', imageData)\n\n        try {\n            const response = await fetch('http://127.0.0.1:5001/predict', { // Замените URL на ваш бэкенд\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ image: imageData })\n            })\n            const data = await response.json()\n            if (data.error) {\n                console.error('Error from server:', data.error)\n                return\n            }\n\n            prediction.value = data\n            console.log('Prediction Result:', data)\n        } catch (error) {\n            console.error('Error:', error)\n        }\n    }\n}\n</script>\n\n<style scoped>\n/* design */\n.cv-wrapper {\n    margin: 0;\n    background-image: url('@/assets/images/bg-cv.png');\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    color: #ffffff;\n}\n\n/*computer vision section*/\n.main-title-section {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    width: 100%;\n    gap: 20px;\n}\n\n/*animation fade in computer vision*/\n@keyframes fadeInUp {\n    0% {\n        opacity: 0;\n        transform: translateY(50px);\n    }\n\n    100% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n/*computer vision title*/\n.main-title {\n    text-align: center;\n    animation: fadeInUp 2s ease-out;\n}\n\n.main-title p {\n    font-size: 6vw;\n    margin: 0;\n    font-weight: 500;\n}\n\n/*computer vision animation*/\n@keyframes fadeIn {\n    0% {\n        opacity: 0;\n        transform: scale(0.9);\n    }\n\n    100% {\n        opacity: 1;\n        transform: scale(1);\n    }\n}\n\n/*camera section */\n#camera-container {\n    gap: 20px;\n    opacity: 1;\n    transition: opacity 1s ease, transform 1s ease;\n    padding: 20px;\n    border-radius: 15px;\n    background: rgba(0, 0, 0, 0.6);\n    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);\n    margin-bottom: 50px;\n    display: flex; \n    animation: fadeIn 1s ease;\n}\n\n/*camera section right*/\n#camera,\n#result {\n    border: 1px solid #ddd;\n    border-radius: 15px;\n    overflow: hidden;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n    background: #ffffff;\n}\n\n#video {\n    border-radius: 15px 15px 0 0;\n}\n\n#result {\n    width: 640px;\n    height: 480px;\n    background: #f0f0f0;\n    position: relative;\n}\n\n#capture {\n    display: none;\n    width: 100%;\n    padding: 15px;\n    background-color: #03a9f4;\n    color: #fff;\n    border: none;\n    cursor: pointer;\n    font-size: 1.2em;\n    text-align: center;\n    transition: background-color 0.3s ease;\n    border-radius: 0 0 15px 15px;\n}\n\n#capture:hover {\n    background-color: #0288d1;\n}\n\n/* Показываем кнопку capture, когда камера активна */\n#camera-container #capture {\n    display: block;\n}\n\n.try-now-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 10px;\n}\n\n.button {\n    font-size: 1.4em;\n    padding: 0.6em 0.8em;\n    border-radius: 0.5em;\n    border: none;\n    background-color: #000;\n    color: #fff;\n    cursor: pointer;\n    box-shadow: 2px 2px 3px #000000b4;\n}\n\n.container {\n    position: relative;\n    padding: 3px;\n    background: linear-gradient(90deg, #03a9f4, #f441a5);\n    border-radius: 0.9em;\n    transition: all 0.4s ease;\n    animation: fadeInUp 2s ease-out;\n}\n\n.container::before {\n    content: \"\";\n    position: absolute;\n    inset: 0;\n    margin: auto;\n    border-radius: 0.9em;\n    z-index: -10;\n    filter: blur(0);\n    transition: filter 0.4s ease;\n}\n\n.container:hover::before {\n    background: linear-gradient(90deg, #03a9f4, #f441a5);\n    filter: blur(1.2em);\n}\n\n.container:active::before {\n    filter: blur(0.2em);\n}\n\n/* transitions */\n.fade-enter-active, .fade-leave-active {\n    transition: opacity 1s;\n}\n\n.fade-enter-from, .fade-leave-to {\n    opacity: 0;\n}\n</style>\n"],"mappings":";;EACSA,KAAK,EAAC;AAAY;;EAD3BC,GAAA;EAeuCC,EAAE,EAAC;;;EACrBA,EAAE,EAAC;AAAQ;;EACLC,GAAG,EAAC,OAAO;EAACC,KAAK,EAAC,KAAK;EAACC,MAAM,EAAC,KAAK;EAACC,QAAQ,EAAR;;;EAEpCH,GAAG,EAAC,QAAQ;EAACI,KAAsB,EAAtB;IAAA;EAAA;;;EAEpBL,EAAE,EAAC;AAAQ;;EArBhCD,GAAA;AAAA;mBAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;uBACIO,mBAAA,CAsCM,OAtCNC,UAsCM,GArCFC,mBAAA,CASM;IATDV,KAAK,EAAC;EAAoB,I,0BAC3BU,mBAAA,CAEM;IAFDV,KAAK,EAAC;EAAY,IACnBU,mBAAA,CAAsB,WAAnB,iBAAe,E,sBAEtBA,mBAAA,CAIM;IAJDV,KAAK,EAAC;EAAmB,IAC1BU,mBAAA,CAEM;IAFDV,KAAK,EAAC;EAAW,IAClBU,mBAAA,CAA2D;IAAnDV,KAAK,EAAC,QAAQ;IAAEW,OAAK,EAAEC,MAAA,CAAAC;KAAY,SAAO,E,OAK9DC,mBAAA,qDAAwD,EACxDC,YAAA,CAwBaC,WAAA;IAxBDC,IAAI,EAAC;EAAM;IAd/BC,OAAA,EAAAC,QAAA,CAcqE,MAyBlE,CAxBoBP,MAAA,CAAAQ,cAAc,I,cAAzBZ,mBAAA,CAsBM,OAtBNa,UAsBM,GArBFX,mBAAA,CAIM,OAJNY,UAIM,GAHFZ,mBAAA,CAA6D,SAA7Da,UAA6D,+BAC7Db,mBAAA,CAA2D;MAAnDR,EAAE,EAAC,SAAS;MAAES,OAAK,EAAEC,MAAA,CAAAY;OAAc,SAAO,GAClDd,mBAAA,CAAqD,UAArDe,UAAqD,8B,GAEzDf,mBAAA,CAeM,OAfNgB,UAeM,GAdSd,MAAA,CAAAe,UAAU,I,cAArBnB,mBAAA,CAaM,OAnC1BoB,UAAA,GAuBwBlB,mBAAA,CAAiF;MAA3EmB,GAAG,8BAA8BjB,MAAA,CAAAe,UAAU,CAACG,KAAK;MAAEC,GAAG,EAAC;4BAvBrFC,UAAA,GAwBmCpB,MAAA,CAAAe,UAAU,CAACM,QAAQ,IAAIrB,MAAA,CAAAe,UAAU,CAACM,QAAQ,CAACC,MAAM,Q,cAA5D1B,mBAAA,CAOM,OA/B9B2B,UAAA,G,0BAyB4BzB,mBAAA,CAA2B,YAAvB,oBAAkB,sBACtBA,mBAAA,CAIK,c,kBAHDF,mBAAA,CAEK4B,SAAA,QA7BrCC,WAAA,CA2B+DzB,MAAA,CAAAe,UAAU,CAACM,QAAQ,EA3BlF,CA2B4CK,OAAO,EAAEC,KAAK;2BAA1B/B,mBAAA,CAEK;QAFgDP,GAAG,EAAEsC;MAAK,GAAAC,gBAAA,CACxDF,OAAO,CAACA,OAAO,IAAG,IAAE,GAAAE,gBAAA,CAAGF,OAAO,CAACG,UAAU;yDAIxDjC,mBAAA,CAEM,OAlC9BkC,WAAA,EAAAC,MAAA,QAAAA,MAAA,OAiC4BjC,mBAAA,CAA4B,WAAzB,uBAAqB,oB,SAjCpDI,mBAAA,e,OAAAA,mBAAA,e;IAAA8B,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}